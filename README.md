# ì¢‹ì•„í•˜ë©´ ëˆ„ë¥´ëŠ”

<h1 align="center" style="max-width: 100%;">
  <img width="1100" alt="Logo" src="README.assets/title.png" style="max-width: 100%;" /><br/>
</h1>


<table>
  <tbody>
    <tr>
      <td><img width="500" src="README.assets/1.gif" alt="ë©”ì¸í™”ë©´"></td>
      <td><img width="500" src="README.assets/2.gif" alt="í•˜íŠ¸ì†¡ìˆ˜ì‹ "></td?>
    </tr>
    <tr>
      <td><img width="500" src="README.assets/3.gif" alt="ì±„íŒ…"></td>
      <td><img width="500" src="README.assets/4.gif" alt="ì´ëª¨ì§€ë³€ê²½"></td>
    </tr>
  </tbody>
</table>


<p align="center">
  <b>Supported</b><br/>
  <a href="#"><img width="45" src="https://upload.wikimedia.org/wikipedia/commons/thumb/a/a7/React-icon.svg/1200px-React-icon.svg.png" alt="react" /></a>&nbsp;&nbsp;
    <a href="#"><img width="45" src="https://w7.pngwing.com/pngs/727/307/png-transparent-java-development-kit-operating-systems-android-macos-android-text-logo-computer-program.png" alt="java" /></a>&nbsp;&nbsp;
  <a href="#"><img width="45" src="https://perfectacle.github.io/2017/08/02/Spring-boot-study-001day/thumb.png" alt="springboot" /></a>&nbsp;&nbsp;
  <a href="#"><img width="45" src="https://t1.daumcdn.net/cfile/tistory/991A86475C91BE1D40" alt="jpa" /></a>&nbsp;&nbsp;
  <a href="#"><img width="45" src="https://media.vlpt.us/images/ec532/post/bc893d61-4eaa-4f8f-9b2c-e2d2143506a4/aws_ec2.svg" alt="EC2" /></a>&nbsp;&nbsp;
    <a href="#"><img width="45" src="https://upload.wikimedia.org/wikipedia/commons/thumb/3/39/Kubernetes_logo_without_workmark.svg/1200px-Kubernetes_logo_without_workmark.svg.png" alt="kube" /></a>&nbsp;&nbsp;
    <a href="#"><img width="45" src="https://perfectacle.github.io/2019/04/16/spring-boot-docker-image-optimization/thumb.png" alt="docker" /></a>&nbsp;&nbsp;
    <a href="#"><img width="45" src="https://upload.wikimedia.org/wikipedia/commons/thumb/e/e9/Jenkins_logo.svg/1200px-Jenkins_logo.svg.png" alt="jenkins" /></a>&nbsp;&nbsp;
    <a href="#"><img width="45" src="https://blog.kakaocdn.net/dn/rrEfB/btq97aMSAsX/lstil1pt0KJW0Iy2WPO0Mk/img.png" alt="nginx" /></a>&nbsp;&nbsp;
  <a href="#"><img width="45" src="https://w7.pngwing.com/pngs/747/798/png-transparent-mysql-logo-mysql-database-web-development-computer-software-dolphin-marine-mammal-animals-text.png" alt="mysql" /></a>&nbsp;&nbsp;
    <a href="#"><img width="45" src="https://w7.pngwing.com/pngs/63/19/png-transparent-mongodb-database-nosql-postgresql-mongo-text-logo-business-thumbnail.png" alt="mongo" />


## ğŸ’ ê°œìš”

### ë‹¤ìš´ë¡œë“œ ë° ì‹¤í–‰

ì›¹ : www.someone-might-like-you.com

ì•ˆë“œë¡œì´ë“œ : https://play.google.com/store/apps/details?id=com.nianticlabs.pokemongo

ì•„ì´í° : https://play.google.com/store/apps/details?id=com.nianticlabs.pokemongo

<br>

<table style="table-layout: fixed; overflow-wrap: break-word;">
  <tbody>
    <tr>
      <td colspan="2"><a href="#" target="_blank"><img width="1000" src="README.assets/promotion.gif" alt="Parallax demo" style="max-width: 100%;" /></a></td>
    </tr>
  </tbody>
</table>


<h1 style="text-align:center" >
   ìµëª… ì†ì—ì„œ ì„¤ë ˜ì„
</h1>
<h3 style="text-align:center">
  <br>
  ì£¼ë³€ 100m ì´ë‚´ì˜ ì‚¬ìš©ìë“¤ì€ ì„œë¡œì˜ ìœ„ì¹˜ë¥¼ ê³µìœ í•©ë‹ˆë‹¤ <br><br>
  í•˜íŠ¸ë¥¼ ì†¡ìˆ˜ì‹  í•  ìˆ˜ ìˆìœ¼ë©°, í•˜íŠ¸ê°€ ë§¤ì¹­ëœ ì‚¬ìš©ìë“¤ì€ 1:1 ì±„íŒ…ì´ ìë™ìœ¼ë¡œ ìƒì„±í•©ë‹ˆë‹¤ <br><br>
  ì´ëª¨ì§€ ë³€ê²½, ìœ ì € ì‹ ê³  ë“± ë¶€ê°€ì ì¸ ê¸°ëŠ¥ì„ ì œê³µí•©ë‹ˆë‹¤
</h3>

<br>

## ğŸ’ Release History

<h3 style="text-align:center;">
  22.05.21 - ì•±ìŠ¤í† ì–´ ì¶œì‹œ</h3>  <h5  style="text-align:center;"><br></h5>


<h3 style="text-align:center;">
  22.05.20 - í”Œë ˆì´ìŠ¤í† ì–´ ì¶œì‹œ</h3>  <h5  style="text-align:center;"><br></h5>


<h3 style="text-align:center;">
  22.05.13 - Web 2ì°¨ ë°°í¬</h3>  <h5  style="text-align:center;">ì•ˆë‚´ í…œí”Œë¦¿ <br> ê±´ì˜í•¨ <br> ìœ„ì¹˜ ì—‘ì„¸ìŠ¤ í—ˆìš© ì•ˆë‚´ <br> ì´ëª¨ì§€ ë³€ê²½ <br></h5>
<h3 style="text-align:center;">
  22.05.06 - Web ìµœì´ˆ ë°°í¬</h3>
 <h5  style="text-align:center;"> ì‚¬ìš©ìê°„ ìœ„ì¹˜ ê³µìœ  <br> í•˜íŠ¸ ì†¡ìˆ˜ì‹  <br> ì±„íŒ… <br> ìœ ì € ì‹ ê³  <br></h5>

## ğŸ›  ì•„í‚¤í…ì²˜

![Lovepush_Architecture](README.assets/Lovepush_Architecture.jpg)

## ğŸ›  ê¸°ìˆ  ìŠ¤íƒ

### ğŸ’ **Front-end**

| <img src="https://profilinator.rishav.dev/skills-assets/html5-original-wordmark.svg" alt="HTML5" width="50px" height="50px" /> | <img src="https://profilinator.rishav.dev/skills-assets/css3-original-wordmark.svg" alt="CSS3" width="50px" height="50px" /> | <img src="https://profilinator.rishav.dev/skills-assets/javascript-original.svg" alt="TypeScript" width="50px" height="50px" /> |
| :----------------------------------------------------------: | :----------------------------------------------------------: | :----------------------------------------------------------: |
|                            HTML5                             |                             CSS3                             |                          javascript                          |

| <img src="https://profilinator.rishav.dev/skills-assets/react-original-wordmark.svg" alt="React.js" width="50px" height="50px" /> | Stomp | TypeScript |
| :----------------------------------------------------------: | :---: | :--------: |
|                            React                             | Stomp | TypeScript |

### ğŸš€ **Back-end**

| <img src="https://profilinator.rishav.dev/skills-assets/java-original-wordmark.svg" alt="Java" width="50px" height="50px" /> | <img src="https://www.seekpng.com/png/full/8-80775_spring-logo-png-transparent-spring-java.png" alt="Spring-Boot" width="50px" height="50px" /> | <img src="https://spring.io/images/projects/spring-data-79cc203ed8c54191215a60f9e5dc638f.svg" alt="JPA" width="50px" height="50px" /> | <img src="https://spring.io/images/projects/spring-security-b712a4cdb778e72eb28b8c55ec39dbd1.svg" alt="Spring-Security" width="50px" height="50px" /> | <img src="https://jwt.io/img/pic_logo.svg" alt="jwt" width="50px" height="50px" /> |
| :----------------------------------------------------------: | :----------------------------------------------------------: | :----------------------------------------------------------: | :----------------------------------------------------------: | :----------------------------------------------------------: |
|                             Java                             |                         Spring-Boot                          |                          Spring-JPA                          |                       Spring-Security                        |                             JWT                              |

### ğŸšŠ DB

| <img src="https://profilinator.rishav.dev/skills-assets/mysql-original-wordmark.svg" alt="MySQL" width="50px" height="50px" /> | <img src="https://raw.githubusercontent.com/devicons/devicon/1119b9f84c0290e0f0b38982099a2bd027a48bf1/icons/mongodb/mongodb-original-wordmark.svg" alt="MongoDB" width="50px" height="50px" /> |
| :----------------------------------------------------------: | :----------------------------------------------------------: |
|                            MySQL                             |                           Mongodb                            |

### ğŸ¬ **DevOps**

| <img src="https://profilinator.rishav.dev/skills-assets/nginx-original.svg" alt="NGiNX" width="50px" height="50px" /> | <img src="https://pbs.twimg.com/profile_images/1351702967561252865/aXfcETIt_400x400.jpg" alt="aws" width="50px" height="50px" /> | <img src="https://profilinator.rishav.dev/skills-assets/docker-original-wordmark.svg" alt="docker" width="50px" height="50px" /> | <img src="https://www.jenkins.io/images/logos/jenkins/jenkins.svg" alt="jenkins" width="50px" height="50px" /> | <img src="https://upload.wikimedia.org/wikipedia/commons/thumb/3/39/Kubernetes_logo_without_workmark.svg/926px-Kubernetes_logo_without_workmark.svg.png" alt="kubernetes" width="50px" height="50px" /> |
| :----------------------------------------------------------: | :----------------------------------------------------------: | :----------------------------------------------------------: | :----------------------------------------------------------: | :----------------------------------------------------------: |
|                            NGiNX                             |                             aws                              |                            docker                            |                           Jenkins                            |                          Kubernetes                          |

### ğŸ’¡ ê¸°íš ë° ìš´ì˜

| <img src="https://upload.wikimedia.org/wikipedia/commons/thumb/e/e0/Git-logo.svg/768px-Git-logo.svg.png?20160811101906" alt="Git" width="50px" height="50px" /> | <img src="https://wac-cdn-2.atlassian.com/image/upload/f_auto,q_auto/dam/jcr:b544631f-b225-441b-9e05-57b7fd0d495b/Jira%20Software@2x-icon-blue.png" alt="jira" width="50px" height="50px" /> | <img src="https://cdn2.downdetector.com/static/uploads/logo/figma2.png" alt="figma" width="50px" height="50px" /> | <img src="https://blog.kakaocdn.net/dn/2CufY/btq8RTsnYaT/3EQm1A8iL54UcCzFkemVJ1/img.png" alt="notion" width="50px" height="50px" /> | <img src="https://play-lh.googleusercontent.com/FERhw8K6nxOmNNthc4zLb6FnkO5_iDs-W4w3Uc_GiHosUYJlkeXHp-Qom5kbq4u__Ns" alt="mattermost" width="50px" height="50px" /> | <img src="https://play-lh.googleusercontent.com/0oO5sAneb9lJP6l8c6DH4aj6f85qNpplQVHmPmbbBxAukDnlO7DarDW0b-kEIHa8SQ=w512" alt="discord" width="50px" height="50px" /> |
| :----------------------------------------------------------: | :----------------------------------------------------------: | :----------------------------------------------------------: | :----------------------------------------------------------: | :----------------------------------------------------------: | :----------------------------------------------------------: |
|                             Git                              |                             JIRA                             |                            Figma                             |                            Notion                            |                          Mattermost                          |                           Discord                            |

### ğŸ“± App

| <img src="https://upload.wikimedia.org/wikipedia/commons/thumb/0/06/Kotlin_Icon.svg/1200px-Kotlin_Icon.svg.png" alt="kotlin" width="50px" height="50px" /> | <img src="https://blog.kakaocdn.net/dn/bU8z6O/btqKXLx6c0Y/szaVg2oqCAUxMYex0n8zs1/img.png" alt="android_studio" width="50px" height="50px" /> | <img src="https://images.velog.io/images/gooreum_90/post/c53e169b-71ea-4bf5-84ce-9523949b2dfd/swiftlogo.png" alt="swift" width="50px" height="50px" /> | <img src="https://is5-ssl.mzstatic.com/image/thumb/Purple122/v4/9d/25/cf/9d25cfe3-2476-20ae-ed0f-8d67a188bad7/Xcode-85-220-0-4-2x.png/1200x630bb.png" alt="xcode" width="50px" height="50px" /> |
| :----------------------------------------------------------: | :----------------------------------------------------------: | :----------------------------------------------------------: | :----------------------------------------------------------: |
|                            Kotlin                            |                        Android Studio                        |                            Swift                             |                            Xcode                             |

## ğŸ’ íŒ€ & ê¸°ìˆ 

<table>
<tr>
  <td valign="top" width="50%">
    <a href="https://github.com/eora21">
      <img src="README.assets/juho.png" align="left" style="width: 98%" />
    </a>
  </td>
  <td valign="top" width="50%">
    <a href="https://github.com/glowforever42">
      <img src="README.assets/hyi.png" align="left" style="width: 98%" />
    </a>
  </td>
</tr>
<tr>
  <td valign="top" width="50%">
    <a href="https://github.com/82surf">
      <img src="README.assets/hyunsu.png" align="left" style="width: 98%" />
    </a>
  </td>
  <td valign="top" width="50%">
    <a href="https://github.com/Gkuer">
      <img src="README.assets/geonhee.png" align="left" style="width: 98%" />
    </a>
  </td>
  </tr>
  <tr>
    <td valign="top" width="50%">
    <a href="https://github.com/EuneeChung">
      <img src="README.assets/eune.png" align="left" style="width: 98%" />
    </a>
  </td>
  <td valign="top" width="50%">
    <a href="https://github.com/gkstmdgns422">
      <img src="README.assets/seunghoon.png" align="left" style="width: 98%" />
    </a>
  </td>
</tr>
</table>



#### ğŸ–¥ï¸ ì£¼ìš” Stack

|                        Content                         |           Main            |                          Detail                          |
| :----------------------------------------------------: | :-----------------------: | :------------------------------------------------------: |
|              [**í•˜íŠ¸ì†¡ìˆ˜ì‹ **](#ìŒì„±ì¸ì‹)               | Python 3.9.6 / JavaScript |             webkitSpeechRecognition / Axios              |
|                  [**ì±„íŒ…**](#ë“œë¡œì‰)                   |        JavaScript         |                Canvas / Blob Data/ Axios                 |
|                   [**ìœ„ì¹˜ ê³µìœ **]()                    |  HTML / CSS / JavaScript  |            Django 3.2.9 / HTML5 / CSS3 / ES6             |
|         [**Kubernetes**](#ìƒ‰ì±„-ë°ì´í„°-ë§Œë“¤ê¸°)          |  C# .Net Framework 4.7.2  |            C#(OpenCvSharp4 - V4.5.3.20210817)            |
| [**íŒŒì´í”„ë¼ì¸ êµ¬ì¶•**](#ì•Œê³ ë¦¬ì¦˜-êµ¬ì„±-ë°-ì›¹í˜ì´ì§€-ì‘ì—…) |       Python 3.9.6        |                       Python(Math)                       |
|                    [**CI/CD**](#db)                    |       Python 3.9.6        |                    Python(Shell_plus)                    |
|           [**Ingress Nginx**](#query-ìµœì í™”)           |       Django 3.2.9        |      prefetch_related / annotate / filter / exclude      |
|                   [**ë°°í¬**](#ë°°í¬)                    |            AWS            | EC2(Ubuntu Server 20.04 LTS) / Cloud9 / Gunicorn / NGINX |
|               [**íšŒì›ê´€ë¦¬**](#back-end)                |   JWT / Spring Security   |              JWT / HS512 / Spring Security               |
|                        Android                         |          Kotlin           |             Android Studio 4.1.1 / Web View              |
|                          iOS                           |           Swift           |             Xcode 13.3.1 / Web View / WebKit             |
|                                                        |                           |                                                          |
|                                                        |                           |                                                          |
|                                                        |                           |                                                          |
|                                                        |                           |                                                          |
|                                                        |                           |                                                          |
|                                                        |                           |                                                          |
|                                                        |                           |                                                          |
|                                                        |                           |                                                          |
|                                                        |                           |                                                          |

# âš™ï¸ Individual Tech Section

## ğŸƒ Section1, ê¹€ì£¼í˜¸ - ìœ„ì¹˜ ê¸°ë°˜ ê¸°ìˆ ê³¼ ì±„íŒ…ì— ëŒ€í•˜ì—¬

> BE: Springboot Websocket
>
> FE: sockjs-client@1.6.0 / @stomp/stompjs@6.1.2 / @types/sockjs-client@1.5.1 / @types/stompjs@2.3.5

#### ì–´ë–»ê²Œ ê·¼ì²˜ ìœ ì €ë“¤ì„ ì–»ì–´ì˜¬ ê²ƒì¸ê°€?

ì œì¼ ì‰¬ìš´ ë°©ë²•ì€, ë‚´ ìœ„ì¹˜ë¥¼ ì¤‘ì‹¬ìœ¼ë¡œ ëª¨ë“  ìœ ì €ë“¤ê³¼ì˜ ê±°ë¦¬ë¥¼ ê³„ì‚° í›„ 100m ì´ë‚´ì¸ ìœ ì €ë¥¼ ê±¸ëŸ¬ë‚´ë©´ ëœë‹¤.

í—ˆë‚˜ ì´ëŠ” ìœ ì €ì˜ ìˆ˜ê°€ ë§ì•„ì§€ë©´ ë§ì•„ì§ˆìˆ˜ë¡ íš¨ìœ¨ì´ ê¸‰ê°í•˜ë©°, ê³„ì†í•´ì„œ ìœ ì €ë“¤ì˜ ì‹¤ì‹œê°„ ìœ„ì¹˜ë¥¼ ë°›ì•„ë‚´ì•¼ë§Œ í•œë‹¤.

ì¢‹ì€ ë°©ë²•ì´ ì•„ë‹ ê²ƒ ê°™ì•„ ë§ì€ ê³ ë¯¼ì„ í•˜ë˜ ì¤‘, [ìš°ì•„í•œ Tech ë¶„ì‚° ì´ë²¤íŠ¸ ìŠ¤íŠ¸ë¦¬ë°](https://youtu.be/PvAlbOm9WN8?t=5516) ì˜ìƒê³¼ [ì¹´ì¹´ì˜¤ì˜ W3W](https://kakaomap.tistory.com/238)ì—ì„œ ì˜ê°ì„ ì–»ì–´ ì „ ì„¸ê³„ë¥¼ ì •í•´ì§„ í¬ê¸°ì˜ êµ¬íšìœ¼ë¡œ ë‚˜ëˆˆ í›„ ë‚´ êµ¬íšì„ ê¸°ì¤€ìœ¼ë¡œ ì£¼ë³€ì˜ êµ¬íš ë°ì´í„°ë¥¼ ì–»ì–´ì˜¤ë©´ ë  ê²ƒ ê°™ì•˜ë‹¤.

í•´ë‹¹í•˜ëŠ” ë°©ì‹ì´ë¼ë©´ ì£¼ë³€ êµ¬íšì— ì ‘ê·¼í•˜ì—¬ ìœ ì € ëª©ë¡ì„ ìƒì„±í•  ìˆ˜ ìˆìœ¼ë‹ˆ, êµ‰ì¥íˆ ì¢‹ì€ ë°©ë²•ì´ë¼ ìƒê°í–ˆë‹¤.

ì•„ì‰½ê²Œë„ ì¹´ì¹´ì˜¤ì˜ W3Wë‚˜ ì¼ë°˜ [W3W](https://developer.what3words.com/public-api/docs)ê°€ ê·¼ì²˜ êµ¬íšë§Œì„ ìƒì„±, íšë“í•˜ëŠ” ë°©ë²•ìœ¼ë¡œëŠ” ë°©í–¥ì„±ì´ ë§ì§€ ì•Šë‹¤ê³  ëŠê»´ì¡Œê¸° ë•Œë¬¸ì—, **ì§ì ‘ gps ë°ì´í„°ë¥¼ ê³„ì‚°í•˜ì—¬ êµ¬íšì„ ìƒì„±í•˜ëŠ” ë°©ì‹**ì„ ì±„íƒí•˜ì˜€ë‹¤.

#### gps data -> sector data?

ë³´í†µ gps ë°ì´í„°ë¥¼ ìˆ˜ì‹ í•  ê²½ìš°, 37.xxxxxxx, 127.xxxxxxx ì˜ ê°’ì„ ê°€ì ¸ì˜¤ê²Œ ëœë‹¤.

í•´ë‹¹í•˜ëŠ” ê°’ì„ í•˜ë‚˜ì˜ êµ¬íšìœ¼ë¡œ ë°”ê¾¸ì–´ì•¼ í•œë‹¤. êµ¬íšì€ ëª‡ më¡œ ì„¸íŒ…í•´ì•¼ í•˜ë©°, ì† ì‰½ê²Œ ë‚˜ëˆŒ ìˆ˜ ìˆëŠ” ë°©ë²•ì€ ë¬´ì—‡ì´ ìˆì„ê¹Œ?

ìš°ì„  1mê°€ gpsìƒì—ì„œ ëª‡ ì°¨ì´ê°€ ë‚˜ëŠ”ì§€ í™•ì¸í•´ ë³´ì•˜ë‹¤. [í•´ë‹¹ ê¸€ì„ ì°¸ê³ ](https://m.cafe.daum.net/gpsyn/Pllz/530)í•˜ìë©´, 0.00001ë„ ì°¨ì´ê°€ ëŒ€ëµ 1më¼ í•œë‹¤. ì •í™•í•˜ê²ŒëŠ” ë¬¼ë¡  ì•„ë‹ˆê² ì§€ë§Œ, í•´ë‹¹ ë°©ë²•ìœ¼ë¡œ ì „ ì„¸ê³„ êµ¬íšì„ ë‚˜ëˆˆ í›„ ì‘ì—…í•´ë„ ê´œì°®ì„ ê²ƒ ê°™ë‹¤ëŠ” ìƒê°ì„ í–ˆë‹¤. ê·¸ëŸ¬ë‚˜ ë”ìš± ì •í™•í•œ ê³„ì¸¡ì„ ìœ„í•´, [ë‘ ì§€ì—­ ì‚¬ì´ì˜ ê±°ë¦¬ë¥¼ ì¸¡ì •í•´ ì£¼ëŠ” ì‚¬ì´íŠ¸](http://www.movable-type.co.uk/scripts/latlong.html)ë¥¼ ì°¾ì•„ê°”ë‹¤.

![img](README.assets/gps1.png)

í•´ë‹¹ ì‚¬ì´íŠ¸ì˜ ê³„ì‚°ì— ì˜í•˜ë©´, `3m`ëŠ” ë„ë¶„ì´ˆ ì¢Œí‘œê³„ ê¸°ì¤€ìœ¼ë¡œ `0.0973ì´ˆ`ë§Œí¼ ì°¨ì´ê°€ ìˆì—ˆë‹¤.

![img](README.assets/gps2.png)

`0.1ì´ˆ` ì°¨ì´ëŠ” `3.083m`ë§Œí¼ ì°¨ì´ê°€ ë‚¬ìœ¼ë©°, `1ì´ˆ` ì°¨ì´ëŠ” `30.83m`ì°¨ì´ì˜€ë‹¤.

ê·¸ë ‡ë‹¤ë©´, gps ë°ì´í„°ë¥¼ ìˆ˜ì‹ í•œ í›„ ë„ë¶„ì´ˆ ì¢Œí‘œê³„ë¡œ ë³€í™˜í•˜ê³ , ì†Œìˆ˜ì ì„ ì œì™¸í•œ ë°ì´í„°ë¥¼ êµ¬íšìœ¼ë¡œ ì‚¼ìœ¼ë©´ ë˜ì§€ ì•Šì„ê¹Œ í•˜ëŠ” ìƒê°ì´ ë“¤ì–´ ë°”ë¡œ ì°©ìˆ˜í–ˆë‹¤. ì •í™•íˆ 100mëŠ” ì–´ë µê² ì§€ë§Œ, ëŒ€ëµì ì¸ 100m ë°ì´í„°ë¥¼ ì–»ì„ ìˆ˜ ìˆìœ¼ë¯€ë¡œ..

#### Sector êµ¬í˜„

ì§€êµ¬ì˜ ëª¨ë“  êµ¬ì—­ì„ 30m \* 30m 2ì°¨ì› ë°°ì—´ë¡œ ë§Œë“¤ê¸°ì—ëŠ” ë©”ëª¨ë¦¬ ë‚­ë¹„ê°€ ë„ˆë¬´ í¬ë‹¤. indexë„ ê³„ì‚°í•´ì¤˜ì•¼ í•˜ëŠ” ì´ìŠˆê°€ ìˆìœ¼ë¯€ë¡œ HashMapì„ ë§Œë“  í›„ gps êµ¬íš ë°ì´í„°ë¥¼ keyë¡œ ë“¤ê³  ìˆê¸°ë¡œ í–ˆë‹¤.

ë¹„ë¡œê·¸ì¸ ì‚¬ìš©ìë„ ì´ìš©í•  ìˆ˜ ìˆì–´ì•¼ í•˜ë¯€ë¡œ ì†Œì¼“ ì„¸ì…˜ idë¥¼ í•´ë‹¹ êµ¬íš valueì˜ keyë¡œ ì¡ê³ , pkì™€ ì´ëª¨ì§€URLì„ valueë¡œ ì§€ë‹ˆê³  ìˆê²Œë” í–ˆë‹¤.

```json
{
  "36/21/101/127/20/583": {
    "5ubuuxi3": {
      "pk": 1,
      "emojiURL": "emoji"
    }
  }
}
```

ë˜í•œ ìœ ì €ê°€ ì´ë™í•´ êµ¬íšì´ ë³€ê²½ë˜ê±°ë‚˜ ë¡œê·¸ì¸ ë“±ìœ¼ë¡œ ì´ëª¨ì§€ê°€ ë³€ê²½ëœë‹¤ë©´ basic ì±„ë„ì— ë©”ì„¸ì§€ë¥¼ ì „ì†¡í•˜ì—¬ ëª¨ë“  ìœ ì €ê°€ ì•Œ ìˆ˜ ìˆê²Œë” ë©”ì„¸ì§€ë¥¼ ë³´ë‚´ë„ë¡ í–ˆë‹¤. ì´ëŠ” ìŠ¤ì¼€ì¥´ëŸ¬ë¥¼ ì‚¬ìš©í•˜ì˜€ë‹¤.

```java
@Scheduled(fixedRate = 5000)
public void sendBasicChat() {
    if (gpsRepository.getOperationCommand()) {
        messageTemplate.convertAndSend("/sub/basic", gpsRepository.getAllGpsSectorData());
        gpsRepository.setOffOperationCommand();
    }
}
```

ì†Œì¼“í†µì‹ ì´ ëŠê¸´ë‹¤ë©´ í•´ë‹¹í•˜ëŠ” êµ¬íšì—ì„œ ë°ì´í„°ë¥¼ ì‚­ì œí•´ì•¼ í•˜ë¯€ë¡œ, ì†Œì¼“ ì—°ê²° ë° êµ¬íš ë³€ê²½ ì‹œë§ˆë‹¤ ê°ê°ì˜ ì„¸ì…˜ì— í˜„ì¬ êµ¬íšì„ ë“¤ê³  ìˆë‹¤ê°€, ëŠê¸¸ ê²½ìš° êµ¬íšìœ¼ë¡œ ì ‘ê·¼í•´ í•´ë‹¹í•˜ëŠ” ì„¸ì…˜idê°’ì„ ì œê±°í•˜ë„ë¡ í–ˆë‹¤.

```java
@EventListener
public void handleSessionConnect(SessionConnectEvent event) {
    SimpAttributesContextHolder.currentAttributes().setAttribute("GPS", "");
}

@EventListener
public void handleSessionDisconnect(SessionDisconnectEvent event) {
    String gpsKey = (String) SimpAttributesContextHolder.currentAttributes().getAttribute("GPS");
    String sessionId = event.getSessionId();
    gpsRepository.dropUser(gpsKey, sessionId);
}
```

=======
![image-20220520094541666](README.assets/image-20220520094541666.png)

ëŒ€ëµ í•´ë‹¹ ê·¸ë¦¼ê³¼ ê°™ì€ êµ¬ì¡°ê°€ ë§Œë“¤ì–´ì§„ë‹¤.

#### ì±„íŒ… ì‹œìŠ¤í…œì„ ì´ìš©í•œ ê·¼ì²˜ ìœ ì €ë“¤ê³¼ í•˜íŠ¸ ì†¡ìˆ˜ì‹  ë° ì±„íŒ…ë°© êµ¬í˜„

100m ì´ë‚´ ìœ ì €ë“¤ì„ ì–»ì–´ ì™”ìœ¼ë¯€ë¡œ, í•˜íŠ¸ ë²„íŠ¼ì„ ëˆ„ë¥¸ë‹¤ë©´ ê°ê°ì˜ ìœ ì €ì—ê²Œ ë©”ì„¸ì§€ë¥¼ ë³´ë‚´ëŠ” ë°©ë²•ìœ¼ë¡œ êµ¬ì„±í•˜ì˜€ë‹¤. ë¹„ë¡œê·¸ì¸ ì‚¬ìš©ìë“¤ë„ í•˜íŠ¸ë¥¼ ì–»ì„ ìˆ˜ ìˆë„ë¡, sessionIdë¥¼ ì–»ì–´ì™€ í•´ë‹¹ ì±„ë„ì„ subscribeí•œ í›„, í•˜íŠ¸ ë©”ì„¸ì§€ë¥¼ ë°›ìœ¼ë©´ ì´ë²¤íŠ¸ë¥¼ í˜¸ì¶œí•˜ë„ë¡ í–ˆë‹¤.

```tsx
const sessionId = (
    (client.webSocket as any)._transport.url as string
).split('/')[6];

...

client.subscribe(`/sub/heart/${sessionId}`, (message) => {
    const whisper: whisper = JSON.parse(message.body);
    changeSignal();
    receiveMessageDispatch(whisper);
});
```

`changeSignal`ì—ì„œëŠ” ë‹¨ìˆœ boolean ê°’ì„ true, falseë¡œ ë°”ê¿”ì£¼ì–´ í•˜íŠ¸ë¥¼ ë°›ì•˜ëŠ”ì§€ ì•„ë‹Œì§€ í™•ì¸í•˜ê²Œë” í–ˆìœ¼ë©°, `receiveMessageDispatch`ë¥¼ í†µí•´ í•˜íŠ¸ë¥¼ ì „ì†¡í•œ ìœ ì €ì™€ì˜ ê´€ë ¨ì„±ì„ ì²´í¬í•œë‹¤. ë§Œì•½ í•˜íŠ¸ê°€ êµí™˜ë˜ì—ˆìœ¼ë©´ì„œ ì±„íŒ…ë°©ì´ ë¯¸ìƒì„±ëœ ìœ ì €ë¼ë©´, ì±„íŒ…ë°© ìƒì„± apiì— ì ‘ê·¼í•˜ì—¬ ì±„íŒ…ë°©ì„ ì‹ ì„¤í•œ í›„ ì–‘ìª½ ìœ ì €ì—ê²Œ ì±„íŒ…ë°© ìƒì„± ì•Œë¦¼ì„ ë³´ë‚¸ë‹¤.

FEì—ì„œ ì±„íŒ…ë°© ìƒì„± ì•Œë¦¼ì´ ìˆ˜ì‹ ë˜ë©´, ìƒì„±ëœ ì±„íŒ…ë°©ì„ ëª©ë¡ì— ì¶”ê°€í•œ í›„ ë°©ì˜ pkë¡œ subscribeë¥¼ ìˆ˜í–‰í•œë‹¤. Stomp íŠ¹ì„± ìƒ subscribeì™€ í•¨ê»˜ ì–´ë– í•œ ë™ì‘ì„ í•  ì§€ Callbackì„ ì§€ì •í•´ì¤˜ì•¼ í•˜ê¸° ë•Œë¬¸ì— í•œ ë²ˆì— ì‘ì„±í•˜ì˜€ë‹¤. ê·¸ëŸ¬ë‚˜ ì´ ë‘˜ì„ ë”°ë¡œ ë¶„ë¦¬ì‹œì¼œ `êµ¬ë… / êµ¬ë…ì´ë²¤íŠ¸` í˜•íƒœë¡œ êµ¬ì¶•í–ˆìœ¼ë©´ ì¢€ ë” ê°€ë…ì„±ì´ ì¢‹ì€ ì½”ë“œê°€ ë˜ì§€ ì•Šì•˜ì„ê¹Œ ì‹¶ë‹¤.

```tsx
if (!chatUserSet.has(action.person)) {
  chatUserSet.add(action.person);
  setAlertText("ì±„íŒ…ë°©ì´ ìƒì„±ë˜ì—ˆìŠµë‹ˆë‹¤!");
  openAlert();
  const newChatRoom: chatBox = {
    chatroomSeq: action.chatRoom,
    userList: [seq, action.person],
    activate: true,
  };
  setChatRoomList((pre) => [newChatRoom, ...pre]);

  chatsDispatch({
    type: "INSERT",
    idx: action.chatRoom,
    messages: new Array<messageType>(),
    messageType: {} as messageType,
  });

  client.subscribe(`/sub/chat/room/${action.chatRoom}`, (message) => {
    setMessageCount((pre) => {
      pre[action.chatRoom] += 1;
      return pre;
    });

    chatsDispatch({
      type: "CHAT_MESSAGE",
      idx: action.chatRoom,
      messages: [],
      messageType: JSON.parse(message.body) as messageType,
    });
  });
}
```

ë°© ë‚´ë¶€ì—ì„œëŠ” ì±„íŒ…ë°©ì˜ ë°ì´í„°ë¥¼ ë‹´ì•„ publishë¥¼ ìˆ˜í–‰í•œë‹¤. BEì—ì„œëŠ” í•œ ê³³ì— ì±„íŒ… ë©”ì„¸ì§€ë¥¼ ë°›ê³ , ë°ì´í„°ì— ë”°ë¼ ì–´ë– í•œ ì±„íŒ…ë°©ì— ì–´ë–»ê²Œ ì „ë‹¬í•  ê²ƒì¸ì§€ë¥¼ ì„ íƒí•˜ëŠ” êµ¬ì¡°ë¡œ í•˜ì˜€ë‹¤.

```tsx
client.publish({
  destination: "/pub/chat/message",
  body: JSON.stringify({
    type: "TALK",
    roomId: `${idx}`,
    sender: `${seq}`,
    message: `${message}`,
  }),
});
@MessageMapping("chat/message")
    public void message(ChatMessageDTO message) {
        switch (message.getType()) {
            case TALK:
                chatService.CreateChat(message);
                break;
            ...
        }
    }
@Transactional
public void CreateChat(ChatMessageDTO DTO) {
    String pattern = "yyyy-MM-dd a KK:mm ss:SSS";
    DateFormat df = new SimpleDateFormat(pattern);
    ChatEntity chatEntity = ChatEntity.builder()
        .type(DTO.getType())
        .roomId(DTO.getRoomId())
        .sender(DTO.getSender())
        .message(DTO.getMessage())
        .sendTime(df.format(new Date()))
        .build();
    chatRepository.save(chatEntity);
    messageTemplate.convertAndSend("/sub/chat/room/" + DTO.getRoomId(), chatEntity);
}
```

í•´ë‹¹í•˜ëŠ” ë°©ë²•ìœ¼ë¡œ 100m ì´ë‚´ ìœ ì €ë¥¼ ì–»ì–´ì™”ìœ¼ë©°, í•˜íŠ¸ë¥¼ êµí™˜í•˜ê³  ì±„íŒ…ì„ ë‚˜ëˆŒ ìˆ˜ ìˆë„ë¡ í•˜ì˜€ë‹¤.



## âœ¨ Section2, ë‚¨ê¶íœ˜ - Swiftì—ì„œ í•˜ì´ë¸Œë¦¬ë“œ ì•±ì„ ê°œë°œí•´ë³´ì!

###  iOSì—ì„œ ì›¹ í˜ì´ì§€ë¥¼ ë„ì›Œì¤„ ìˆ˜ ìˆëŠ” ë°©ë²•ì€ í¬ê²Œ 3ê°€ì§€

- WebKit
- Open Safari
- SFSafariViewController

ì´ë“¤ ì¤‘ iOS 13 ë²„ì „ ì´ìƒ ë¶€í„°ëŠ” WebKit ì‚¬ìš©ì„ ê¶Œì¥í•˜ê³  ìˆê¸° ë•Œë¬¸ì—, WebKitì„ ì‚¬ìš©í•˜ê¸°ë¡œ ê²°ì •í–ˆìŠµë‹ˆë‹¤.



### WebKitì´ë€?

WebKitì€ ì¸í„°ë„· ì°½ì„ ë„ì›Œ ì¤„ ìˆ˜ ìˆê²Œ WebView ê¸°ëŠ¥ì„ ì œê³µí•´ì£¼ëŠ” ë¼ì´ë¸ŒëŸ¬ë¦¬ ì…ë‹ˆë‹¤.



### WebKit ì‚¬ìš©ë°©ë²•

> 1. WKWebView í”„ë ˆì„ì›Œí¬ë¥¼ í”„ë¡œì íŠ¸ì— ì¶”ê°€í•´ì¤ë‹ˆë‹¤.
> 2. ì‚¬ìš©í•˜ë ¤ëŠ” ViewControllerì— WebKitì„ importí•´ì¤ë‹ˆë‹¤.
> 3. í•„ìš”ì— ë”°ë¼ plist ìˆ˜ì • í•˜ë©´ì„œ ê¸°ëŠ¥ì„ ì¡°ì •í•©ë‹ˆë‹¤.



### í•˜ì´ë¸Œë¦¬ë“œ ì•± êµ¬í˜„

Viewê°€ Loadë˜ë©´ ì‚¬ì „ì— ì œì‘í•´ë†“ì€ ì›¹ í˜ì´ì§€ë¥¼ ë„ì›Œì£¼ë„ë¡ êµ¬í˜„í–ˆìŠµë‹ˆë‹¤

```swift
import UIKit
import WebKit
import CoreLocation


class ViewController: UIViewController, CLLocationManagerDelegate{
    // MARK: - Property
    // extensionìœ¼ë¡œ CLLocationManagerDelegate êµ¬í˜„í•˜ê¸°
    weak var webKitView: WKWebView?
    
    var locationManager:CLLocationManager! // ë³€ìˆ˜ ì„ ì–¸í• ë•Œ !ë¥¼ ë¶™íˆë„´
    
    var lat: Double?
    var long: Double?
    
    override func viewDidLoad() {
        super.viewDidLoad()
        locationManager = CLLocationManager()
        loadUrl()
        locationManager.delegate = self

        // ì•„ë˜ í•¨ìˆ˜ ìš”ì²­ì‹œ ìœ„ì¹˜ê¶Œí•œ íŒì—… ì¶œë ¥
        self.locationManager.requestWhenInUseAuthorization()
    
        // ìŠ¤ì™€ì´í”„ë¥¼ í†µí•´ì„œ ë’¤ë¡œê°€ê¸° ì•ìœ¼ë¡œê°€ê¸°ë¥¼ í• ìˆ˜ ìˆê²Œ í•´ì£¼ëŠ” ì„¤ì •ê°’
        self.webKitView?.allowsBackForwardNavigationGestures = true
        
        // ì •í™•í•œ ìœ„ì¹˜ ìš”ì²­
        locationManager.desiredAccuracy = kCLLocationAccuracyHundredMeters
        // kCLLocationAccuracyBest -> ê¸°ë³¸ê°’ , ê°€ì¥ ë†’ì€ ì •í™•ë„
        // kCLLocationAccuracyHundredMeters -> 100m ë‚´ì—ì„œ ì •í™•í•˜ê²Œ íŒŒì•…í•˜ê¸°.
        locationManager.startUpdatingLocation()
        
        // ì•±ì´ ë°±ê·¸ë¼ìš´ë“œ ìƒíƒœì—ì„œ ìœ„ì¹˜ê°€ ë³€ê²½ë˜ì–´ë„ ì¶”ì 
        // ë°°í„°ë¦¬ ì´ìŠˆê°€ ì¡´ì¬ í•  ìˆ˜ë„
        locationManager.allowsBackgroundLocationUpdates = true
        // ì•±ì„ ì¢…ë£Œí•˜ë©´ ë°±ê·¸ë¼ìš´ë“œì—ì„œ ë” ì´ìƒ ìœ„ì¹˜ ì•ˆì”€ -> ì„¤ëª…ì„ ë”°ë¡œ í•´ì¤˜ì—¬ í• ê¹Œ
        
    let space = locationManager.location?.coordinate
    lat = space?.latitude
    long = space?.longitude }


    // weak : ì•½í•œ ì°¸ì¡°
    // í•´ë‹¹ ì¸ìŠ¤í„´ìŠ¤ì˜ ì†Œìœ ê¶Œì„ ê°€ì§€ì§€ ì•Šê³ , ì£¼ì†Œê°’ë§Œì„ ê°€ì§€ê³  ìˆëŠ” í¬ì¸í„° ê°œë…
    // ìì‹ ì´ ì°¸ì¡°ëŠ” í•˜ì§€ë§Œ weak ë©”ëª¨ë¦¬ë¥¼ í•´ì œí•  ìˆ˜ ìˆëŠ” ê¶Œí•œì€ ë‹¤ë¥¸ í´ë˜ìŠ¤ì— ìˆìŒ.
    // MARK: - View Life Cycle
    override func loadView() {
        // rootView
        let view = UIView()
        self.view = view

        // WebKitView
        let webConfiguration = WKWebViewConfiguration()
        let webKitView: WKWebView = WKWebView(frame: .zero, configuration: webConfiguration)
        self.webKitView = webKitView
        webKitView.translatesAutoresizingMaskIntoConstraints = false
        self.view.addSubview(webKitView)

        // WebKitView ì œì•½ì‚¬í•­
        NSLayoutConstraint.activate([
            webKitView.widthAnchor.constraint(equalTo: self.view.widthAnchor),
            webKitView.heightAnchor.constraint(equalTo: self.view.heightAnchor),
            webKitView.centerXAnchor.constraint(equalTo: self.view.centerXAnchor),
            webKitView.centerYAnchor.constraint(equalTo: self.view.centerYAnchor)
        ])
    }

    // MARK: - Func
    func loadUrl() {
        if let url = URL(string: "https://www.someone-might-like-you.com") {
            let urlRequest = URLRequest(url: url)
            webKitView?.load(urlRequest)
        } else {
            // ì—ëŸ¬ì²˜ë¦¬ë¬¸.. ì˜ˆë¥¼ë“¤ì–´ì„œ alertë¥¼ ë„ì›Œì£¼ê±°ë‚˜..
            print("ì ‘ì†ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.")
        }
    }
}

```



#### info.plist ìˆ˜ì •í•˜ê¸°(ATS ì‘ì„±)

info.plist íŒŒì¼ì—ì„œ ì˜¤ë¥¸ìª½ì„ í´ë¦­í•´ì„œ Add Rowë¥¼ í´ë¦­í•´ì¤ë‹ˆë‹¤.

![allow](README.assets/allow.png)

Allow Arbitrary Loads - True(1ì´ True 2ê°€ False)ë¥¼ ì¶”ê°€í•´ì¤ë‹ˆë‹¤.

**Allow Arbitrary Loads** ëŠ” ëª¨ë“  URLì— í•œì—ì„œ http, https ìƒê´€ì—†ì´ `Boolê°’ìœ¼ë¡œ ì²˜ë¦¬ í•˜ê² ë‹¤` ë¼ëŠ” ëœ»ì…ë‹ˆë‹¤.

ê°’ì´ Trueë¼ë©´  httpë¼ë„ í†µì‹ ì„ í•˜ê² ë‹¤ëŠ” ì˜ë¯¸ì…ë‹ˆë‹¤. 

ì´ë ‡ê²Œ í•´ë‘ë©´ ë§Œë“¤ì–´ë†“ì€ ì›¹ í˜ì´ì§€ê°€ ì •ìƒì ìœ¼ë¡œ ëœ¨ëŠ”ê±¸ í™•ì¸ í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤

ì¶”í›„ ì˜ˆì™¸ URL(ì›¹ì‚¬ì´íŠ¸) ë§Œ í—ˆìš©ì‹œí‚¤ëŠ” ë°©ì‹ì„ ì¶”ê°€ë¡œ ì ìš©í•´ì„œ ë³´ì•ˆì„ ì¢€ ë” ê°•í™”í•˜ë ¤ê³  í•©ë‹ˆë‹¤.



### ìœ„ì¹˜ ì •ë³´ ìš”ì²­í•˜ê¸°

ì €í¬ ì„œë¹„ìŠ¤ëŠ” ìœ„ì¹˜ ì •ë³´ê°€ ë°˜ë“œì‹œ í•„ìš”í•œ ì„œë¹„ìŠ¤ê¸° ë•Œë¬¸ì—, ë””ë°”ì´ìŠ¤ì— ìš”ì²­ì„ ë°›ì•„ì˜¤ëŠ” ê³¼ì •ì´ í•„ìš” í–ˆìŠµë‹ˆë‹¤.

ViewControllerì— extensionì„ í†µí•´ ê¸°ëŠ¥ì„ êµ¬í˜„í–ˆìŠµë‹ˆë‹¤.

ë””ë°”ì´ìŠ¤ì— ìœ„ì¹˜ ì •ë³´ ìš”ì²­ì„ í•˜ê³  ë§Œì•½ ìš”ì²­ì„ ê±°ì ˆ í–ˆë‹¤ë©´, ì•±ì˜ ì„¤ì •ì°½ìœ¼ë¡œ ë³´ë‚´ì„œ ê¶Œí•œì„ ë‹¤ì‹œ ì„¤ì • í•  ìˆ˜ ìˆê²Œ í•´ì£¼ì—ˆìŠµë‹ˆë‹¤.

```swift
extension ViewController {
    func getLocationUsagePermission() {
        self.locationManager.requestWhenInUseAuthorization()
    }
    
    // ìœ„ì¹˜ ì •ë³´ ê¶Œí•œ ì—†ì„ ì‹œ, ì•± ì„¤ì • ì°½ìœ¼ë¡œ ë³´ë‚´ì£¼ëŠ” ì½”ë“œ
    func setLocationAuth() {
        let authAlertController: UIAlertController
        authAlertController = UIAlertController(title: "ìœ„ì¹˜ ì •ë³´ ê¶Œí•œ ìš”ì²­", message: "ì €í¬ ì„œë¹„ìŠ¤ë¥¼ ì´ìš©í•˜ì‹œê¸° ìœ„í•´ì„œëŠ” ìœ„ì¹˜ ì •ë³´ê°€ í•„ìš”í•©ë‹ˆë‹¤. ìœ„ì¹˜ ì ‘ê·¼ í—ˆìš©ì„ í•´ì£¼ì„¸ìš”.", preferredStyle: .alert)
        // ì•± ì„¤ëª…ì— í•„ìˆ˜ê¶Œí•œìœ¼ë¡œ ì ì–´ë‘ê¸°.
        let getAuthAction: UIAlertAction
        getAuthAction = UIAlertAction(title: "ë„¤ ì•Œê² ìŠµë‹ˆë‹¤.", style: UIAlertAction.Style.default, handler: { _ in
            // ë³´ë‚´ì£¼ë©´ í•´ë‹¹ ì•±ì˜ ì„¤ì • ì°½ìœ¼ë¡œ ê°€ê²Œ ëœë‹¤. ê°€ëŠ¥í•˜ë‹¤ë©´ ì„¤ëª…ì„ ìì„¸íˆ ì ì–´ ì£¼ê¸°.
            if let appSettings = URL(string: UIApplication.openSettingsURLString){
                UIApplication.shared.open(appSettings, options: [:], completionHandler: nil)
            }
        })
        authAlertController.addAction(getAuthAction)
        self.present(authAlertController, animated: true, completion: nil)
    }

    func locationManager(_ manager: CLLocationManager, didChangeAuthorization status: CLAuthorizationStatus) {
            switch status {
            case.authorizedAlways, .authorizedWhenInUse:
                print("GPS ê¶Œí•œ ì„¤ì • ì™„ë£Œ")
//            case.restricted, .notDetermined:
//                print("GPS ê¶Œí•œ ì„¤ì • ë˜ì§€ ì•ŠìŒ")
            case.denied:
//                print("GPS ê¶Œí•œ ê±°ë¶€ ë¨") êµ³ì´ ì¼€ì´ìŠ¤ ë‹¤ í•„ìš”ì—†ì´ ë””ë‚˜ì´ë‘ ë””í´íŠ¸ë§Œ ìˆìœ¼ë©´ ë ë“¯. ìŠ¤ìœ„ì¹˜ëŠ” í•´ì•¼í•˜ë‹ˆê¹Œ.
                setLocationAuth()
            default:
                print("GPS Default")
            }
        }
}

```



## ğŸ‘‘ Section3, ìœ í˜„ìˆ˜ - Google Analytics

### Google Analytics ì ìš©í•˜ê¸°

> react-ga ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ ì‚¬ìš©í•´ Reactì— Google Analytics(ì´í•˜ GA)ë¥¼ ì ìš©í•˜ëŠ” ë°©ë²•

#### GA ê³„ì • ìƒì„±

- [Google Analytics](https://analytics.google.com) ì‚¬ì´íŠ¸ì— ì ‘ì†í•´ ê³„ì •ì„ ìƒì„±í•©ë‹ˆë‹¤.
- ì†ì„± ì„¤ì • > ê³ ê¸‰ ì˜µì…˜ ë³´ê¸° > **ìœ ë‹ˆë²„ì„¤ ì• ë„ë¦¬í‹±ìŠ¤ ì†ì„±ë§Œ ë§Œë“¤ê¸° ë¥¼ ì„ íƒ**í•©ë‹ˆë‹¤.
  - **react-ga ë¼ì´ë¸ŒëŸ¬ë¦¬ê°€ UA(ìœ ë‹ˆë²„ì„¤ ì• ë„ë¦¬í‹±ìŠ¤)ë§Œ ì§€ì›í•˜ê¸° ë•Œë¬¸**ì…ë‹ˆë‹¤.
- ê³„ì • ìƒì„±ì´ ì™„ë£Œë˜ë©´ "UA-XXXX" í¬ë§·ì˜ ì¶”ì  IDë¥¼ í™•ì¸í•©ë‹ˆë‹¤.

#### react-ga ì„¤ì¹˜

> ì£¼ì˜ì‚¬í•­: 22/05/02 ê¸°ì¤€ react-gaëŠ” react v17ê¹Œì§€ë§Œ ì§€ì›í•©ë‹ˆë‹¤.

ì•„ë˜ ëª…ë ¹ì–´ë¡œ `react-ga` ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ ì„¤ì¹˜í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

```bash
# npm
$ npm install react-ga
```

#### useGA ì»¤ìŠ¤í…€ í›… ë§Œë“¤ê¸°

`ReactGA.initialize` ì‹œ ì•ì—ì„œ í™•ì¸í•œ ì¶”ì  IDë¥¼ ì ìš©í•©ë‹ˆë‹¤.

```javascript
// hooks/useGA

import { useState, useEffect } from "react";
import { useLocation } from "react-router-dom";
import ReactGA from "react-ga";

const useGA = () => {
  const location = useLocation();
  const [initialized, setInitialized] = useState(false);

  // ê°œë°œí™˜ê²½ì´ ì•„ë‹ ê²½ìš°ì—ë§Œ GA initialize
  useEffect(() => {
    if (!window.location.href.includes("localhost")) {
      ReactGA.initialize(`${process.env.REACT_APP_GA_TRACKING_ID}`);
    }
    setInitialized(true);
  }, []);

  // GA initializeê°€ ë˜ì–´ìˆë‹¤ë©´ pageview ì „ì†¡
  useEffect(() => {
    if (initialized) {
      ReactGA.pageview(location.pathname + location.search);
    }
  }, [initialized, location]);

  /*
   * GA ë””ë²„ê¹…ìš© ì½”ë“œ
   * ê°œë°œí™˜ê²½ì—ì„œë„ GA initialize.
   * debug ì˜µì…˜ì´ ì„¤ì •ë˜ì–´ consoleì— íŠ¸ë˜í‚¹ ì •ë³´ë¥¼ ì¶œë ¥.
   */
  // useEffect(() => {
  //   ReactGA.initialize(`${process.env.REACT_APP_GA_TRACKING_ID}`, {
  //     debug: true,
  //   });
  //   ReactGA.pageview(location.pathname + location.search);
  // }, [location]);
};

export default useGA;
```

#### GARoutes ì»´í¬ë„ŒíŠ¸ ë§Œë“¤ê¸°

`react-router-dom`ì˜ `useLocation` hookì€ Router ë‚´ë¶€ì—ì„œë§Œ ë™ì‘í•˜ëŠ” hookì…ë‹ˆë‹¤.
ë•Œë¬¸ì— `useGA` í›…ì„ ë°”ë¡œ `App.js`ì— ì ìš©í•˜ë©´ ì—ëŸ¬ê°€ ë°œìƒí•©ë‹ˆë‹¤.
ì´ë¥¼ ë°©ì§€í•˜ê¸° ìœ„í•´ `useGA` í›…ì„ ì‚¬ìš©í•˜ëŠ” ì»¤ìŠ¤í…€ `Router` ì»´í¬ë„ŒíŠ¸ë¥¼ ë§Œë“¤ì–´ ì‚¬ìš©í•©ë‹ˆë‹¤.

```javascript
// components/GARoutes

import { ReactNode } from "react";
import { Routes } from "react-router-dom";

import useGA from "../hooks/useGA";

const GARoutes = ({ children }: { children: ReactNode }) => {
  useGA();
  return <Routes>{children}</Routes>;
};

export default GARoutes;
```

ì´ë ‡ê²Œ ë§Œë“  `GARouter` ì»´í¬ë„ŒíŠ¸ë¥¼ `App.tsx`ì— ì ìš©í•©ë‹ˆë‹¤.

```javascript
// App.tsx

import GARoutes from "./components/GARoutes";

function App() {
  return (
    <BrowserRouter>
      <GARoutes>
        <Route path="/" element={<IndexPage />} />
        <Route path="/info" element={<InfoPage />} />
      </GARoutes>
    </BrowserRouter>
  );
}

export default App;
```

#### GA ì´ë²¤íŠ¸ ì¶”ì í•˜ê¸°

[`ReactGA.event(args)`](https://github.com/react-ga/react-ga#reactgaeventargs) APIë¥¼ ì‚¬ìš©í•´ ì´ë²¤íŠ¸ë¥¼ ì¶”ì í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. `category`, `action`ëŠ” í•„ìˆ˜ë¡œ ì…ë ¥í•´ì•¼í•˜ëŠ” ì¸ìì…ë‹ˆë‹¤.
ì´ë²¤íŠ¸ í•¸ë“¤ëŸ¬ ë‚´ë¶€ì— ì‘ì„±í•˜ë©´ í•´ë‹¹ ì´ë²¤íŠ¸ë¥¼ ì¶”ì í•©ë‹ˆë‹¤.

```javascript
// Home.tsx

...
const heartClickHandler = () => {
    ReactGA.event({
      category: 'í•˜íŠ¸ ë²„íŠ¼ í´ë¦­',
      action: 'í•˜íŠ¸ ë²„íŠ¼ í´ë¦­',
    });
    updatePushHeart();
    sendHeart();
  };
...
```

## ğŸ—³ï¸ Section4, ì´ê±´í¬ - ì¿ ë²„ë„¤í‹°ìŠ¤, ë„ì»¤, ì  í‚¨ìŠ¤ë¥¼ í™œìš©í•œ ë°°í¬ì™€ CI/CDì— ëŒ€í•˜ì—¬

### `ê°œìš”`

> ë†’ì€ íŠ¸ë˜í”½ê³¼ ì†Œì¼“ í†µì‹ ìœ¼ë¡œ ì¸í•œ ë¶€í•˜ë¥¼ ì˜ˆìƒí–ˆë‹¤. í•´ë‹¹ íŠ¸ë˜í”½ê³¼ ë¶€í•˜ë¥¼ Devopsê°€ ë‚˜ í˜¼ìì¸ ìš°ë¦¬ íŒ€ì´ ê°ë‹¹í•˜ê¸° ìœ„í•´ ì¿ ë²„ë„¤í‹°ìŠ¤ë¥¼ ë„ì…í–ˆë‹¤.

> ì¿ ë²„ë„¤í‹°ìŠ¤ ì„¤ê³„ë¶€í„° CI/CD ì ìš©ê¹Œì§€, ì²˜ìŒì´ë¼ ì–´ë ¤ì› ê³ , ìë™í™”ê¹Œì§€ ì™„ì„±í–ˆì„ ë•ŒëŠ” ê·¸ë§Œí¼ ë³´ëŒì„ ëŠê¼ˆë‹¤.



#### ì¿ ë²„ë„¤í‹°ìŠ¤ ë„ì… ëª©ì 

* ë¬´ì¤‘ë‹¨ ë°°í¬
* ë¶€í•˜ë¶„ì‚°
* ì˜¤í† íë§
* ì»¨í…Œì´ë„ˆì˜ ê´€ë¦¬ ìš©ì´



#### í´ëŸ¬ìŠ¤í„° ì„¤ê³„

![Lovepush_Architecture](README.assets/Lovepush_Architecture.jpg)

* EC2ì„œë²„ 4ê°œê°€ ê°€ìš©ìì›ìœ¼ë¡œ, ë§ˆìŠ¤í„° ë…¸ë“œ 1ê°œì™€ ì›Œì»¤ ë…¸ë“œ 3ê°œë¡œ êµ¬ì„±í•œë‹¤.

* Mysql, Mongodbë¡œ DB ì´ì›í™”ë¥¼ ì ìš©í•œë‹¤. (ì±„íŒ…ì˜ Readì†ë„ ê³ ë ¤)

* í•´ë‹¹ DBëŠ” PVC-PV ë§ˆìš´íŠ¸í•˜ì—¬ ì˜êµ¬ì ìœ¼ë¡œ ë³´ê´€í•œë‹¤.

* Desired State : ë°±ì—”ë“œëŠ” íŒŸ 10ê°œ / í”„ë¡ íŠ¸ì—”ë“œëŠ”  íŒŸ 7ê°œë¡œ ì„¤ì •í•˜ì˜€ë‹¤.

* Ingress-nginxë¥¼ ì ìš©í•˜ì˜€ê³ , Let's Encryptë¥¼ í†µí•´ HTTPSë¥¼ ì ìš©í•˜ì˜€ë‹¤.

* Jenkins Pipelineì„ êµ¬ì¶•í•˜ì—¬, ì¼ë ¨ì˜ ê³¼ì •ì„ ìë™í™”í•œë‹¤.

  * Gitì˜ ë³€í™”ë¥¼ ê°ì§€í•˜ì—¬ Codeë¥¼ ë°›ì•„ì˜¤ê³ ,
  * í•´ë‹¹ ì½”ë“œë¡œ Docker Imageë¥¼ ìƒì„±í•œë‹¤.
  * ìƒì„±ëœ Docker Imageë¥¼ Dockerhubì— Pushí•œë‹¤.
  * Kubeì™€ ì—°ë™í•˜ì—¬ í•´ë‹¹ Deploymentë¥¼ Rolloutí•œë‹¤.

* Mattermostì™€ ì—°ë™í•˜ì—¬ ë¹Œë“œ í˜„í™©ê³¼ ë¡œê·¸ë¥¼ ê³µìœ í•œë‹¤.

  ![á„‰á…³á„á…³á„…á…µá†«á„‰á…£á†º 2022-05-20 á„‹á…©á„Œá…¥á†« 11.02.28](README.assets/mattermost.png)

## ğŸ›¡ï¸ Section5, ì •ì€ì´ - JWTì™€ Spring Securityë¥¼ í†µí•œ ì¸ì¦ê³¼ ì¸ê°€

#### JWTë¥¼ ì‚¬ìš©í•œ ì´ìœ  

- ê°„í¸í•˜ê³  ì‰½ê²Œ ì ìš© ê°€ëŠ¥
- ì¤‘ì•™ì˜ ì¸ì¦ ì„œë²„ , ë°ì´í„° ìŠ¤í† ì–´ì— ëŒ€í•œ ì˜ì¡´ì„± ì—†ìŒ
- ì‹œìŠ¤í…œ ìˆ˜í‰ í™•ì¥ ìœ ë¦¬

#### Spring Security ë¥¼ ì‚¬ìš©í•œ ì´ìœ 

- Spring Security ëŠ” Spring  ê¸°ë°˜ì˜ ì• í”Œë¦¬ì¼€ì´ì…˜ì˜ ë³´ì•ˆ( ì¸ì¦ê³¼ ê¶Œí•œ, ì¸ê°€ ë“±)ì„ ë‹´ë‹¹í•˜ëŠ” ìŠ¤í”„ë§ í•˜ìœ„ í”„ë ˆì„ì›Œí¬ì´ë‹¤.
- ëª¨ë“  URLì„ ê°€ë¡œì±„ì–´ ì¸ì¦ì„ ìš”êµ¬í•˜ê³ , í•´ë‹¹ URLì— ì ‘ê·¼í•  ìˆ˜ ìˆëŠ” ê¶Œí•œ ì„¤ì •ì´ ê°€ëŠ¥í•˜ë‹¤. ì•„ì§ê¹Œì§„ USER ì— ëŒ€í•œ API ê°€ ëŒ€ë¶€ë¶„ì´ì§€ë§Œ, ê´€ë¦¬ì í˜ì´ì§€ ë“±ì„ ë§Œë“¤ì‹œì— í™•ì¥ ê°€ëŠ¥ì„±ì´ ë†’ë‹¤.

#### Dependency ì„¤ì •

```grable
implementation 'org.springframework.boot:spring-boot-starter-security'
implementation group: 'io.jsonwebtoken', name: 'jjwt-api', version: '0.11.2'
runtimeOnly group: 'io.jsonwebtoken', name: 'jjwt-impl', version: '0.11.2'
runtimeOnly group: 'io.jsonwebtoken', name: 'jjwt-jackson', version: '0.11.2'
```

#### YML - JWT ì„¤ì •

```
jwt:
  header:[header key]
  secret:[secret key]
  token-validity-in-seconds:[seconds]
```

### TokenProvider

```java
@Component
public class TokenProvider implements InitializingBean {
    private final Logger logger = LoggerFactory.getLogger(TokenProvider.class);

    private static final String AUTHORITIES_KEY = "auth";

    private final String secret;
    private final long tokenValidityInMilliseconds;
    private Key key;

    public TokenProvider(
            @Value("${jwt.secret}") String secret,
            @Value("${jwt.token-validity-in-seconds}") long tokenValidityInMilliseconds) {
        this.secret = secret;
        this.tokenValidityInMilliseconds = tokenValidityInMilliseconds*1000;
    }

    @Override
    public void afterPropertiesSet() throws Exception {
        byte[] keyBytes = Decoders.BASE64.decode(secret);
        this.key = Keys.hmacShaKeyFor(keyBytes);
    }
}
implements InitializingBean
```

`afterPropertiesSet()` ì„ ì˜¤ë²„ë¼ì´ë“œ í•œ ì´ìœ ëŠ”

BEANì´ ìƒì„±ì´ ë˜ê³  ì£¼ì…ì„ ë°›ì€ í›„ì— secretê°’ì„ Base64 Decodeí•´ì„œ Key ë³€ìˆ˜ì— í• ë‹¹

```
createToken(Authentication authentication)
```

- Authentication ê°ì²´ì˜ ê¶Œí•œì •ë³´ë¥¼ ì´ìš©í•´ì„œ í† í°ì„ ìƒì„±í•˜ëŠ” ë©”ì†Œë“œ

```java
public String createToken(Authentication authentication) {
        String authorities = authentication.getAuthorities().stream()
                .map(GrantedAuthority::getAuthority)
                .collect(Collectors.joining(","));

        long now = (new Date()).getTime();
        Date validity = new Date(now + this.tokenValidityInMilliseconds);

        return Jwts.builder()
                .setSubject(authentication.getName())
                .claim(AUTHORITIES_KEY,authorities)
                .signWith(key, SignatureAlgorithm.HS512)
                .setExpiration(validity)
                .compact();
    }
```

authentication íŒŒë¼ë¯¸í„°ë¥¼ ë°›ì•„ì„œ ê¶Œí•œë“¤,

application.ymlì—ì„œ ì„¤ì •í–ˆë˜ ë§Œë£Œ ì‹œê°„ ( expire time ) ë„ ì„¤ì • í›„,

JWT í† í°ì„ ìƒì„±í•´ì„œ ë¦¬í„´í•©ë‹ˆë‹¤!

```
getAuthentication(String token)
```

- tokenì— ë‹´ê²¨ìˆëŠ” ì •ë³´ë¥¼ ì´ìš©í•´ Authentication ê°ì²´ë¥¼ ë¦¬í„´í•˜ëŠ” ë©”ì†Œë“œ ìƒì„±
- í† í°ìœ¼ë¡œ í´ë ˆì„ì„ ë§Œë“¤ê³  ì´ë¥¼ ì´ìš©í•´ user ê°ì²´(`org.springframework.security.core.userdetails.User`)ë¥¼ ë§Œë“¤ì–´ì„œ ìµœì¢…ì ìœ¼ë¡œ Authentication ê°ì²´ë¥¼ ë¦¬í„´

```java
public Authentication getAuthentication(String token){
    Claims claims = Jwts
            .parserBuilder()
            .setSigningKey(key)
            .build()
            .parseClaimsJws(token)
            .getBody();

    Collection<? extends GrantedAuthority> authorities =
            Arrays.stream(claims.get(AUTHORITIES_KEY).toString().split(","))
                    .map(SimpleGrantedAuthority::new)
                    .collect(Collectors.toList());
    User principal = new User(claims.getSubject(),"",authorities);
    return new UsernamePasswordAuthenticationToken(principal,token,authorities);
}
validateToken(String token)
```

- í† í°ì„ parameterë¡œ ë°›ì•„ì„œ í† í°ì˜ ìœ íš¨ì„± ê²€ì¦ì„ ìˆ˜í–‰í•˜ëŠ” validateToken ë©”ì†Œë“œ
- í† í°ì„ íŒŒì‹±í•´ë³´ê³  ë°œìƒí•˜ëŠ” ì˜ˆì™¸ë“¤ì„ ìºì¹˜, ë¬¸ì œê°€ ìˆìœ¼ë©´ false, ì •ìƒì´ë©´ true

```java
public boolean validateToken(String token) {
        try {
            Jwts.parserBuilder().setSigningKey(key).build().parseClaimsJws(token);
            return true;
        } catch (SecurityException | MalformedJwtException e){
            logger.info("ì˜ëª»ëœ JWT ì„œëª…ì…ë‹ˆë‹¤.");
        }catch (ExpiredJwtException e){
            logger.info("ë§Œë£Œëœ JWT í† í°ì…ë‹ˆë‹¤.");
        }catch (UnsupportedJwtException e){
            logger.info("ì§€ì›ë˜ì§€ ì•Šì€ JWT í† í°ì…ë‹ˆë‹¤.");
        }catch (IllegalArgumentException e){
            logger.info("JWT í† í°ì´ ì˜ëª»ë˜ì—ˆìŠµë‹ˆë‹¤.");
        }
        return false;
    }
```

## JwtFilter

- JWTë¥¼ ìœ„í•œ ì»¤ìŠ¤í…€ í•„í„°ë¥¼ ë§Œë“¤ê¸° ìœ„í•´ JwtFilter í´ë˜ìŠ¤ ìƒì„±

- JwtFilterëŠ” TokenProviderë¥¼ ì£¼ì… ë°›ìŒ

- GenericFilterBean ì„ extends í•´ì„œ doFilter Override â‡’ ì‹¤ì œ í•„í„°ë§ ë¡œì§ì€ doFilter ë‚´ë¶€ì— ì‘ì„±

- `resolveToken()` í•„í„°ë§ì„ í•˜ê¸° ìœ„í•´ í† í° ì •ë³´ê°€ í•„ìš”í•¨ â‡’ í† í° ì •ë³´ë¥¼ êº¼ë‚´ì˜¤ê¸° ìœ„í•œ `resolveToken()` ë©”ì†Œë“œ ì¶”ê°€

- `doFilter()` í† í°ì˜ ì¸ì¦ ì •ë³´ë¥¼ securityContextì— ì €ì¥í•˜ëŠ” ì—­í•  ìˆ˜í–‰

  - resolveToken() ì„ í†µí•´ í† í°ì„ ë°›ì•„ì™€ì„œ ìœ íš¨ì„± ê²€ì¦ì„ í•˜ê³  ì •ìƒ í† í°ì´ë©´ SecurityContextì— ì €ì¥

  ```java
  @Override
      public void doFilter(ServletRequest request, ServletResponse response, FilterChain chain) throws IOException, ServletException {
          HttpServletRequest httpServletRequest =(HttpServletRequest) request;
          String jwt = resolveToken(httpServletRequest);
          String requestURI = httpServletRequest.getRequestURI();
  
          if(StringUtils.hasText(jwt) && tokenProvider.validateToken(jwt)){
              Authentication authentication = tokenProvider.getAuthentication(jwt);
              SecurityContextHolder.getContext().setAuthentication(authentication);
              logger.debug("Security Contextedì— '{}' ì¸ì¦ì •ë³´ë¥¼ ì €ì¥í–ˆã……ë¸Œë‹ˆë‹¤.. uri {}",authentication.getAuthorities(),requestURI);
          }else{
              logger.debug("ìœ íš¨í•œ JWT í† í°ì´ ì—†ìŠµë‹ˆë‹¤. uri {}",requestURI);
          }
  
          chain.doFilter(request,response);
      }
  ```

### JwtSecurityConfig

TokenProvider, JwtFilter ë¥¼ SecurityConfigì— ì ìš©í•  ë•Œ ì‚¬ìš©í•  JwtSecurityConfig í´ë˜ìŠ¤ ì¶”ê°€

- SecurityConfigurerAdapter ë¥¼ extends
- TokenProviderë¥¼ ì£¼ì…ë°›ì•„ì„œ JwtFilterë¥¼ í†µí•´ Securityë¡œì§ì— í•„í„°ë¥¼ ë“±ë¡í•©ë‹ˆë‹¤.

## JwtAuthenticationEntryPoint

ìœ íš¨í•œ ìê²© ì¦ëª…ì„ ì œê³µí•˜ì§€ ì•Šê³  ì ‘ê·¼í•˜ë ¤ í•  ë•Œ `401 Unauthorized` ì—ëŸ¬ë¥¼ ë°˜í™˜í•˜ëŠ” í´ë˜ìŠ¤

```java
import org.springframework.security.core.AuthenticationException;
import org.springframework.security.web.AuthenticationEntryPoint;
import org.springframework.stereotype.Component;

import javax.servlet.ServletException;
import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;
import java.io.IOException;

@Component
public class JwtAuthenticationEntryPoint implements AuthenticationEntryPoint {
    @Override
    public void commence(HttpServletRequest request, HttpServletResponse response, AuthenticationException authException) throws IOException, ServletException {
        response.sendError(HttpServletResponse.SC_UNAUTHORIZED); // 401 Unauthorized
    }
}
```

## JwtAccessDeniedHandler

í•„ìš”í•œ ê¶Œí•œì´ ì¡´ì¬í•˜ì§€ ì•ŠëŠ” ê²½ìš°ì— 403 Forbidden ì—ëŸ¬ë¥¼ ë¦¬í„´í•˜ê¸°

```java
import javax.servlet.ServletException;
import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;
import java.io.IOException;

public class JwtAccessDeniedHandler implements AccessDeniedHandler {
    @Override
    public void handle(HttpServletRequest request, HttpServletResponse response, AccessDeniedException accessDeniedException) throws IOException, ServletException {
        response.sendError(HttpServletResponse.SC_FORBIDDEN); // 403 Forbidden
    }
}
```

## 5ê°œ í´ë˜ìŠ¤ SecurityConfigì— ì¶”ê°€

- `@EnableGlobalMethodSecurity(prePostEnabled = true) @PreAuthorize` ì–´ë…¸í…Œì´ì…˜ ë©”ì†Œë“œ ë‹¨ìœ„ë¡œ ì¶”ê°€í•˜ê¸° ìœ„í•´ì„œ ì ìš©

- tokenProvider , jwtAuthenticationEntryPoint  , jwtAccessDeniedHandler  ì£¼ì…

  ```java
  private final TokenProvider tokenProvider;
  private final JwtAuthenticationEntryPoint jwtAuthenticationEntryPoint;
  private final JwtAccessDeniedHandler jwtAccessDeniedHandler;
  
  public SecurityConfig(TokenProvider tokenProvider,JwtAuthenticationEntryPoint jwtAuthenticationEntryPoint, JwtAccessDeniedHandler jwtAccessDeniedHandler){
      this.tokenProvider=tokenProvider;
      this.jwtAuthenticationEntryPoint =jwtAuthenticationEntryPoint;
      this.jwtAccessDeniedHandler=jwtAccessDeniedHandler;
  }
  ```

- password encoder

  ```java
  @Bean
  public PasswordEncoder passwordEncoder(){
      return new BCryptPasswordEncoder();
  }
  ```

- ì˜¤ë²„ë¼ì´ë“œí•œ `configure()` ìˆ˜ì •

  ```java
  @Override
      protected void configure(HttpSecurity http) throws Exception {
          http
                  .csrf().disable() // token ë°©ì‹ì„ ì‚¬ìš©í•˜ê¸° ë•Œë¬¸ì—  disable
  
                  .exceptionHandling() // Exception í•¸ë“¤ë§ í´ë˜ìŠ¤ ì¶”ê°€
                  .authenticationEntryPoint(jwtAuthenticationEntryPoint)
                  .accessDeniedHandler(jwtAccessDeniedHandler)
  
                  .and() // h2 consoleì„ ìœ„í•œ ì„¤ì •
                  .headers()
                  .frameOptions()
                  .sameOrigin()
  
                  .and() // ì„¸ì…˜ì„ ì‚¬ìš©í•˜ì§€ ì•Šê¸° ë–„ë¬¸ì— stateless ì„¤ì •ì •
                  .sessionManagement()
                  .sessionCreationPolicy(SessionCreationPolicy.STATELESS)
  
                  .and()
                  .authorizeRequests()
                  .antMatchers("/hello").permitAll()
                  .antMatchers("/accounts").permitAll() // singup
                  .antMatchers("/accounts/login").permitAll() // login í† í°ì´ ì—†ëŠ” ìƒíƒœì—ì„œ ìš”ì²­
                  .anyRequest().authenticated()
  
                  .and()
                  .apply(new JwtSecurityConfig(tokenProvider)); // addFilterBeforeë¡œ ë“±ë¡í–ˆë˜ JwtSecurityConfig ì ìš©
      }
  ```

  ### 

  ## Repository ê´€ë ¨ ì½”ë“œ ìƒì„±

  `findOneWithAuthoritiesByUsername`

  usernameìœ¼ë¡œ ê¶Œí•œì •ë³´ë„ ê°™ì´ ê°€ì§€ê³  ì˜¤ëŠ” ë©”ì†Œë“œ

  `@EntityGraph(attributePaths = "authorities")`

  ì¿¼ë¦¬ê°€ ìˆ˜í–‰ë ë•Œ Lazy ì¡°íšŒê°€ ì•„ë‹ˆê³ , Eager ì¡°íšŒë¡œ authoritiesì •ë³´ë¥¼ ê°™ì´ ê°€ì ¸ì˜´

  ## ë¡œê·¸ì¸ API, ê´€ë ¨ ë¡œì§ ìƒì„±

  ## `CustomUserDetailsService`

  Spring Securityì—ì„œ ì¤‘ìš”í•œ ë¶€ë¶„ ì¤‘ í•˜ë‚˜ì¸ UserDetailsServiceë¥¼ êµ¬í˜„í•œ CustomUserDetailsService í´ë˜ìŠ¤

  - ë¡œê·¸ì¸ì‹œì— DBì—ì„œ ìœ ì €ì •ë³´ì™€ ê¶Œí•œì •ë³´ë¥¼ ê°€ì§€ê³  ì˜´
  - í•´ë‹¹ ì •ë³´ë¥¼ ê¸°ë°˜ìœ¼ë¡œ userdetails.user ê°ì²´ë¥¼ ìƒì„±í•´ì„œ ë¦¬í„´

  ```java
  import com.cupid.joalarm.accout.entity.User;
  import com.cupid.joalarm.accout.repository.UserRepository;
  import org.springframework.security.core.GrantedAuthority;
  import org.springframework.security.core.authority.SimpleGrantedAuthority;
  import org.springframework.security.core.userdetails.UserDetails;
  import org.springframework.security.core.userdetails.UserDetailsService;
  import org.springframework.security.core.userdetails.UsernameNotFoundException;
  import org.springframework.stereotype.Component;
  
  import java.util.List;
  import java.util.stream.Collectors;
  
  @Component("userDetailsService")
  public class CustomUserDetailsService implements UserDetailsService {
      private final UserRepository userRepository;
  
      public CustomUserDetailsService(UserRepository userRepository) {
          this.userRepository = userRepository;
      }
  
      @Override
      public UserDetails loadUserByUsername(String username) throws UsernameNotFoundException {
          return userRepository.findOneWithAuthoritiesByUsername(username)
                  .map(user -> createUser(username, user))
                  .orElseThrow(() -> new UsernameNotFoundException(username + " -> ë°ì´í„°ë² ì´ìŠ¤ì—ì„œ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤."));
      }
  
      private org.springframework.security.core.userdetails.User createUser(String username, User user) {
          if (!user.isActivated()) {
              throw new RuntimeException(username + " -> í™œì„±í™”ë˜ì–´ ìˆì§€ ì•ŠìŠµë‹ˆë‹¤.");
          }
          List<GrantedAuthority> grantedAuthorities = user.getAuthorities().stream()
                  .map(authority -> new SimpleGrantedAuthority(authority.getAuthorityName()))
                  .collect(Collectors.toList());
          return new org.springframework.security.core.userdetails.User(user.getUsername(), user.getPassword(), grantedAuthorities);
      }
  }
  ```

  ## AccountController

  - `TokenProvider` , `AuthenticationManagerBuilder` ì£¼ì…
  - `authenticate` ê°€ ì‹¤í–‰ì´ ë ë–„, `CustomUserDetailsService`.`loadUserByUsername` ë©”ì†Œë“œê°€ ì‹¤í–‰ ë˜ì„œ ì–»ì€ `Authentication` ê°ì²´ ìƒì„±
  - ì´ ê°ì²´ë¥¼ `SecurityContextHolder` ì— ì €ì¥
  - `createToken` ì„ í†µí•´ì„œ JWT Token ìƒì„±
  - JWT tokenì„ Response Header ì—ë„ ì¶”ê°€
  - TokenDtoì— bodyë¡œ ë°˜í™˜

## â£ Section6, í•œìŠ¹í›ˆ - React-slick & styled-component

### React-slick ì´ë€?

> ë¦¬ì•¡íŠ¸ì—ì„œ ëŒ€ì¤‘ì ìœ¼ë¡œ ì“°ì´ëŠ” jQuery slick ë¼ì´ë¸ŒëŸ¬ë¦¬ë¡œ ìºëŸ¬ì…€ì„ ë§Œë“¤ë•Œ ì£¼ë¡œ ì‚¬ìš©í•œë‹¤. 

#### ì„¤ì¹˜ ë°©ë²•

```bash
$ npm install react-slick
```

#### ì‚¬ìš©ë°©ë²•

> sliderë¥¼ importí•˜ê³  settingsë¥¼ ì„¤ì •í•œë’¤, Slider ë‚´ë¶€ì— settingsë¥¼ ë„£ìœ¼ë©´ ì‹¤í–‰ëœë‹¤.

```react
// ê³µì‹ ë¬¸ì„œì˜ ì¼ë¶€
import Slider from "react-slick"; // slider ë¶ˆëŸ¬ì˜¤ê¸°

// styled-componentë¥¼ ì‚¬ìš©í• ë•Œ í•„ìš”í•œ importë¬¸
import 'slick-carousel/slick/slick.css'; 
import 'slick-carousel/slick/slick-theme.css';

const settings = {
    dots: true, // ì»¨í…ì¸  ì´ë™ ë²„íŠ¼
    infinite: true, // ìŠ¬ë¼ì´ë“œì˜ ë§ˆì§€ë§‰ ë¶€ë¶„ê³¼ ì²˜ìŒë¶€ë¶„ì„ ì´ì–´ ë¬´í•œ ì¬ìƒ
    speed: 500, // ë„˜ê¸°ëŠ” ì†ë„
    slidesToShow: 1, // í•œ í™”ë©´ì— ë³´ì´ëŠ” ê°¯ìˆ˜
    slidesToScroll: 1 // í•œë²ˆì— ë„˜ì–´ê°€ëŠ” ì»¨í…ì¸  ìˆ˜
    arrows: false, // ì–‘ì˜† ì´ë™ í™”ì‚´í‘œ
    beforeChange: (current: any, next: any) => setState(next), // í˜„ì¬ ì„¼í„° ë²ˆí˜¸ë¥¼ ì§€ì •
};

<Slider {...settings}>
    <div>
      <h3>1</h3>
    </div>
</Slider>
```

#### ì´ëª¨ì§€ ìºëŸ¬ì…€ ì¤‘ì•™ ê°’ë§Œ í¬ê¸° í‚¤ìš°ê¸°

> ê³µì‹ ë¬¸ì„œì— ë‚˜ì˜¨ ìºëŸ¬ì…€ì€ ë‚´ë¶€ê°€ ì •í•´ì ¸ ìˆê¸°ì— ìì‹ ì´ ì›í•˜ëŠ” ê³³ë§ˆë‹¤ ê¾¸ë¯¸ê¸°ê°€ ê°€ëŠ¥í•˜ì˜€ë‹¤.
>
> ê·¸ëŸ¬ë‚˜ ìš°ë¦¬ê°€ ì‚¬ìš©í•˜ëŠ” ìºëŸ¬ì…€ ë‚´ë¶€ëŠ” ì´ëª¨ì§€ë¥¼ ëª¨ë‘ ë¶ˆëŸ¬ì™€ ë‚˜ëˆ ì£¼ê¸°ì— í•˜ë‚˜í•˜ë‚˜ ìˆ˜ì •ì´ ë¶ˆê°€ëŠ¥í•˜ì˜€ìœ¼ë©°
>
> ê³µì‹ë¬¸ì„œì—ë„ ë”°ë¡œ ì•Œë ¤ì£¼ëŠ” ê²ƒì´ ì—†ì—ˆë‹¤. ê·¸ë ‡ê¸°ì— ì½”ë“œ í•´ë¶€ì™€ ì¤‘ì•™ ë° ì–‘ì˜†ì˜ ê°’ì„ êµ¬ë¶„í•´ì„œ cssë¥¼ ë‹¤ë¥´ê²Œ
>
> ì„¤ì •í•˜ì˜€ë‹¤.

![ìºëŸ¬ì…€](README.assets/ìºëŸ¬ì…€.png)

> ì‹¤ì œ ìºëŸ¬ì…€ì„ ê°œë°œì ëª¨ë“œë¡œ ë¶„ì„í•œ ê²°ê³¼ ì¤‘ì•™ê³¼ ì•™ì˜†ì˜ í´ë˜ìŠ¤ê°€ êµ¬ë¶„ë˜ì–´ ì§€ì •ë˜ì–´ ìˆì—ˆë‹¤. ê·¸ë ‡ê¸°ì— 
>
> slick-center, slick-currentë¡œ ì¤‘ì•™ì„ êµ¬ë¶„í•˜ì˜€ë‹¤. 

```react
.slick-current {
  transform: scale(1.6) // í¬ê¸°ë¥¼ 1.6ë°°ë¡œ í™•ëŒ€
}
```

> cssë¥¼ ìœ„ì™€ ê°™ì´ ì„¤ì •í•¨ìœ¼ë¡œì¨ ê°€ìš´ë° ì´ëª¨ì§€ì˜ í¬ê¸°ë¥¼ í™•ëŒ€í•˜ì—¬ 3dí˜•íƒœë¡œ í‘œí˜„í•˜ì˜€ë‹¤.



#### ì´ëª¨ì§€ ì¢Œìš° ì›€ì§ì„ ë° í™”ë©´ ë„ˆë¹„ & ë†’ì´ë³„ ì´ëª¨ì§€ í¬ê¸° ì¡°ì ˆ

> ì´ëª¨ì§€ ì¢Œìš° ì›€ì§ì„ì€ css animationì„ í™œìš©

```react
animation-name: move; // ì• ë‹ˆë©”ì´ì…˜ ì¢…ë¥˜ (@keyframesì´ë¦„)
animation-duration: 10s; // êµ¬ë™ ì‹œê°„
animation-fill-mode: both; // ì• ë‹ˆë©”ì´ì…˜ì„ ì „ê³¼ í›„ì— ìŠ¤íƒ€ì¼ì„ ì ìš©
animation-timing-function: linear; // ì• ë‹ˆë©”ì´ì…˜ ì§„í–‰ ë°©ì‹
animation-iteration-count: infinite; // ì• ë‹ˆë©”ì´ì…˜ì„ ì–¼ë§ˆë‚˜ ì¬ìƒí• ì§€
animation-direction: alternate; // ë°©í–¥ ì„¤ì •
@keyframes move {
  from {
    transform: translateX(-250px); // -250px ë¶€í„° ì‹œì‘
  }
  to {
    transform: translateX(250px); // 250px ê¹Œì§€ ì´ë™
  }
}
```

> í•¸ë“œí°ë§ˆë‹¤ ë„ˆë¹„, ë†’ì´ê°€ ë‹¤ë¥´ê¸°ì— location pageì—ì„œ ì´ëª¨ì§€ê°€ ì‘ê±°ë‚˜ ë„˜ì²˜íë¥´ëŠ” í˜„ìƒì„ ìˆ˜ì •í•´ì•¼ í–ˆë‹¤.
>
> ë”°ë¼ì„œ, @mediaë¥¼ í™œìš©í•˜ì—¬ ì´ëª¨ì§€ í¬ê¸°ë¥¼ ë³€ê²½í•˜ì˜€ë‹¤.

```
@media (max-height: 450px) {
  width: 20px;
  height: 20px;
}
@media (min-height: 1100px) {
  width: 100px;
  height: 100px;
}
@media (min-height: 800px) {
  width: 80px;
  height: 80px;
}
```



### styled-component (CSS in JS)

#### styled-componentë€?

> ë¦¬ì•¡íŠ¸ì—ì„œ ê°€ì¥ ë§ì´ ì‚¬ìš©ë˜ê³  ìˆëŠ” css in jsë°©ì‹ìœ¼ë¡œ ì•±ì— ë§ëŠ” CSS ë¼ì´ë¸ŒëŸ¬ë¦¬ì´ë‹¤.
>
> ëŒ€í‘œì ì¸ ì¥ì ìœ¼ë¡œ ì½”ë“œê°€ë…ì„±, ì¬ì‚¬ìš©ì„±, props ì „ë‹¬ ê°€ëŠ¥ì´ ìˆë‹¤.

#### ì„¤ì¹˜ ë°©ë²•

```bash
$ npm install styled-components
```

#### ì‚¬ìš©ë°©ë²•

> styledë¥¼ importí•˜ê³  ì‚¬ìš©í•˜ê³  ì‹¶ì€ íƒœê·¸ë¥¼ ì»¤ìŠ¤í…€ë§ˆì´ì§•í•´ì„œ ì‚¬ìš©í•˜ë©´ ëœë‹¤.

- ê¸°ë³¸ íƒœê·¸ì˜ css ì„¤ì •
  - `const ì»´í¬ë„ŒíŠ¸ëª… = styled.íƒœê·¸ëª…`
- ì»´í¬ë„ŒíŠ¸ ìƒì†
  - `const ì»´í¬ë„ŒíŠ¸ëª… = styled.ìƒì†ëª…` 
  - ì‚¬ìš©í• ë•Œ `${props => cssì„¤ì •}`
- ë³€ìˆ˜ëª… ë³€ê²½
  - `const ì»´í¬ë„ŒíŠ¸ëª… = styled(ê¸°ì¡´ ì»´í¬ë„ŒíŠ¸)`
- ìŠ¤íƒ€ì¼ë§Œì„ ìœ„í•œ ë³€ìˆ˜ê°€ ê¸°ë³¸ React ë…¸ë“œë¡œ ì „ë‹¬ë˜ê±°ë‚˜ DOM ìš”ì†Œë¡œ ë Œë”ë§ë˜ëŠ” ê²ƒì„ ë°©ì§€í•˜ë ¤ë©´ ë³€ìˆ˜ ì´ë¦„ ì•ì— `$` ê¸°í˜¸ë¥¼ ë¶™ì´ë©´ ëœë‹¤.

#### ì˜ˆì‹œë¬¸

```react
import styled from "styled-components";

const Example = () => {
    return (
        <>
          <Button>Hello</Button>
          <NewButton color="blue">new Button</NewButton>
        </>
    );
}
// ê¸°ë³¸ buttoníƒœê·¸ ì„¤ì •
const Button = styled.button`
  width: 200px;
  padding: 30px;
`;

// Button ì»´í¬ë„ŒíŠ¸ ìƒì†
const NewButton = styled.Button`
  color: ${props => props.color || "red"};
`;

export default Example;
```